<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
</head>
<body>
    <h1>Dashboard</h1>
    <form action="/run" name="progpilot" method="GET">
        <fieldset style="width:150">
    	    <legend>Run Progpilot</legend>
	        Last Update : <select name="update1"><option value="0">None</option><option value="1">1 Year</option><option value="2">2 Years</option><option value="3">3 Years</option><option value="4">4 Years</option><option value=5">5 Years</option><option value="6">6 Years</option><option value="7">7 Years</option><option value="8">8 Years</option><option value="9">9 Years</option><option value="10">10 Years</option></select> ~ <select name="update2"><option value="0">None</option><option value="1">1 Year</option><option value="2">2 Years</option><option value="3">3 Years</option><option value="4">4 Years</option><option value=5">5 Years</option><option value="6">6 Years</option><option value="7">7 Years</option><option value="8">8 Years</option><option value="9">9 Years</option><option value="10">10 Years</option></select>
	        Active Sites : <select name="active1"><option value="0">None</option><option value="10">Over 10</option><option value="100">Over 100</option><option value="1000">Over 1,000</option><option value="10000">Over 10,000</option><option value="100000">Over 100,000</option></select> ~ <select name="active2"><option value="0">None</option><option value="10">Under 10</option><option value="100">Under 100</option><option value="1000">Under 1,000</option><option value="10000">Under 10,000</option><option value="100000">Under 100,000</option></select>
	        Download Counts : <select name="download1"><option value="0">None</option><option value="10">Over 10</option><option value="100">Over 100</option><option value="1000">Over 1,000</option><option value="10000">Over 10,000</option><option value="100000">Over 100,000</option></select> ~ <select name="download2"><option value="0">None</option><option value="10">Under 10</option><option value="100">Under 100</option><option value="1000">Under 1,000</option><option value="10000">Under 10,000</option><option value="100000">Under 100,000</option></select>
    <input type="submit" value="Run"/>
        </fieldset>
    </form>
    <div id="script-status"></div>
    <hr>
    <div id="json-output">
	<table border="1">
	    <tr>
		<th>Time</th>
		<th>Result</th>
	    </tr>
	    <tbody id="result">
            </tbody>
	</table>
    </div>
    <script>

        fetch('/get-results').then(response => response.json()).then(data => {
            const outputDiv = document.getElementById('result');
            data.forEach(item => {
		item = JSON.parse(item);
		outputDiv.innerHTML += `<tr><td><a href="/result?file=${item.file}">${item.name}</a></td><td>${item.result}</td></tr>`;
            });
        });

    </script>
</body>
</html>

